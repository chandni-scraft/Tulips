{{ 'section-featured-collections.css' | asset_url | stylesheet_tag }}

{%- style -%}
  #shopify-section-{{ section.id }} {
    --section-spacing-top: {{ section.settings.spacing_top }}rem;
    --section-spacing-bottom: {{ section.settings.spacing_bottom }}rem;
  }
{%- endstyle -%}

<div class="featured-collections section-{{ section.id }}">
  <div class="container {{ section.settings.section_width }}">
    <div class="section-header">
      {% if section.settings.heading != blank %}
        <h2 class="section-heading {{ section.settings.heading_size }}">
          {{ section.settings.heading }}
        </h2>
      {% endif %}

      {% if section.settings.description != blank %}
        <p class="section-description">
          {{ section.settings.description }}
        </p>
      {% endif %}
    </div>

    <div class="collections-grid">
      {%- for collection in collections limit: section.settings.collections_count -%}
        <div class="collection-card">
          <a href="{{ collection.url }}" class="collection-card__link">
            {% if collection.featured_image %}
              {{
                collection.featured_image
                | image_url: width: 600
                | image_tag:
                  widths: '300, 400, 600',
                  sizes: '(max-width: 749px) 50vw, 25vw',
                  class: 'collection-card__image',
                  loading: 'lazy'
              }}
            {% else %}
              {{ 'collection-1' | placeholder_svg_tag: 'collection-card__image' }}
            {% endif %}

            <div class="collection-card__content">
              <h3 class="collection-card__title">
                {{ collection.title }}
              </h3>
              <p class="collection-card__count">
                {{ collection.all_products_count }} {{ 'products.product.items' | t }}
              </p>
            </div>
          </a>
        </div>
      {%- endfor -%}
    </div>

    {% if section.settings.show_view_all and section.settings.view_all_text != blank %}
      <div class="section-footer">
        <a href="{{ routes.collections_url }}" class="view-all-link button button--outlined">
          {{ section.settings.view_all_text }}
        </a>
      </div>
    {% endif %}
  </div>
</div>

{% schema %}
{
  "name": "Featured Collections",
  "class": "section-featured-collections",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Shop by Category"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Description",
      "default": "Explore our carefully curated collections"
    },
    {
      "type": "range",
      "id": "collections_count",
      "label": "Number of collections to show",
      "min": 2,
      "max": 8,
      "step": 1,
      "default": 4
    },
    {
      "type": "checkbox",
      "id": "show_view_all",
      "label": "Show 'View all' button",
      "default": true
    },
    {
      "type": "text",
      "id": "view_all_text",
      "label": "View all button text",
      "default": "View All Collections"
    },
    {
      "type": "select",
      "id": "heading_size",
      "label": "Heading size",
      "options": [
        {
          "value": "h1",
          "label": "H1"
        },
        {
          "value": "h2",
          "label": "H2"
        },
        {
          "value": "h3",
          "label": "H3"
        }
      ],
      "default": "h2"
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "range",
      "id": "spacing_top",
      "label": "Spacing top",
      "min": 0,
      "max": 10,
      "step": 1,
      "unit": "rem",
      "default": 2
    },
    {
      "type": "range",
      "id": "spacing_bottom",
      "label": "Spacing bottom",
      "min": 0,
      "max": 10,
      "step": 1,
      "unit": "rem",
      "default": 4
    },
    {
      "type": "select",
      "id": "section_width",
      "label": "Section width",
      "options": [
        {
          "value": "max-w-page",
          "label": "Page"
        },
        {
          "value": "max-w-fluid",
          "label": "Fluid"
        },
        {
          "value": "max-w-full",
          "label": "Full"
        }
      ],
      "default": "max-w-page"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "scheme-1"
    }
  ],
  "presets": [
    {
      "name": "Featured Collections",
      "category": "Collections"
    }
  ]
}
{% endschema %}