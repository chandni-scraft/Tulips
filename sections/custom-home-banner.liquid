{% schema %}
{
  "name": "Hero Banner",
  "settings": [
    {
      "type": "image_picker",
      "id": "slide_1",
      "label": "Slide 1 (Desktop)"
    },
    {
      "type": "image_picker",
      "id": "slide_1_mobile",
      "label": "Slide 1 (Mobile)"
    },
    {
      "type": "image_picker",
      "id": "slide_2",
      "label": "Slide 2 (Desktop)"
    },
    {
      "type": "image_picker",
      "id": "slide_2_mobile",
      "label": "Slide 2 (Mobile)"
    },
    {
      "type": "image_picker",
      "id": "slide_3",
      "label": "Slide 3 (Desktop)"
    },
    {
      "type": "image_picker",
      "id": "slide_3_mobile",
      "label": "Slide 3 (Mobile)"
    }
  ],
  "presets": [
    {
      "name": "Hero Banner"
    }
  ]
}
{% endschema %}

<div class="hero-slider">
  <div class="slideshow">
    {% for i in (1..3) %}
      {% assign slide_key = 'slide_' | append: i %}
      {% assign slide_mobile_key = 'slide_' | append: i | append: '_mobile' %}
      {% assign slide_image = section.settings[slide_key] %}
      {% assign slide_mobile_image = section.settings[slide_mobile_key] %}
      {% if forloop.first %}
        {% assign desktop_loading = 'eager' %}
        {% assign mobile_loading = 'eager' %}
        {% assign desktop_fetchpriority = 'high' %}
      {% else %}
        {% assign desktop_loading = 'lazy' %}
        {% assign mobile_loading = 'lazy' %}
        {% assign desktop_fetchpriority = '' %}
      {% endif %}

      {% if slide_image %}
        <div class="slide">
          <img
            class="desktop-img"
            src="{{ slide_image | image_url: width: 1600 }}"
            {% if desktop_fetchpriority != blank %}fetchpriority="{{ desktop_fetchpriority }}"{% endif %}
            loading="{{ desktop_loading }}"
            decoding="async"
            alt="Slide {{ i }}"
          >
          {% if slide_mobile_image %}
            <img
              class="mobile-img"
              src="{{ slide_mobile_image | image_url: width: 900 }}"
              loading="{{ mobile_loading }}"
              decoding="async"
              alt="Slide {{ i }} Mobile"
            >
          {% endif %}
        </div>
      {% endif %}
    {% endfor %}
  </div>
</div>

<style>
  .hero-slider {
    width: 100vw;
    height: 80vh;

    overflow: hidden;
    position: relative;
  }

  .slideshow {
    display: flex;
    transition: transform 0.5s ease-in-out;
  }

  .slide {
    min-width: 100%;
    height: 100%;
    position: relative;
  }

  .slide img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  /* Hide mobile images on desktop */
  .mobile-img {
    display: none;
  }

  /* Responsive design */
  @media (max-width: 768px) {
    .hero-slider {
      height: 70vh; /* Adjust height for mobile */
    }

    .desktop-img {
      display: none;
    }

    .mobile-img {
      display: block;
    }
  }
</style>

<script>
document.addEventListener("DOMContentLoaded", function () {
  let index = 0;
  const slides = document.querySelectorAll(".slide");
  const totalSlides = slides.length;

  if (totalSlides <= 1) {
    return;
  }
  
  function showSlide() {
    document.querySelector(".slideshow").style.transform = `translateX(-${index * 100}%)`;
    index = (index + 1) % totalSlides;
  }

  setInterval(showSlide, 3000);
});
</script>
