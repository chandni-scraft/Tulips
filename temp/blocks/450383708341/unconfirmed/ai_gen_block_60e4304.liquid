{% doc %}
  @prompt
    Create an announcement bar styled like a festive promotional ribbon.
    
    Design details:
    
    Background: White with a thin green outline that has curved ticket-style edges on both sides.
    
    Left side: Add a small orange gift box icon with a pink ribbon on top and tiny sparkles around it.
    
    Text (center): “Win Silver Coin on every Order Placed.” — in green text, clean and easy to read.
    
    Font style: Modern sans-serif, medium weight.
    
    Right side: Add a purple rectangular button with rounded corners that says “Order Now” in white text.
    
    Overall look: Light, cheerful, and trustworthy — festive but minimal.
    
    Height: Compact and suitable for the top of an eCommerce website announcement bar., in mobile version, the bar needs to be a single line, the icon, announcement text, button needs to be in the same line, adjust their sizing accordingly , Update the announcement bar background to look like a coupon-style ticket.
    Make sure the entire section is horizontally centered on the page.
    
    Design details:
    
    Use a white inner panel with a thin green border (~4 px).
    
    Add diagonal green stripe textures on the left and right edges only (like coupon stubs).
    
    Each end should have a semi-circular notch cut-out, creating the ticket look.
    
    The corners should be slightly rounded (about 8 px radius).
    
    Add a soft drop shadow under the bar for depth.
    
    Keep the bar height around 120 px and width responsive, but make sure it stays centered on the page, not aligned to navigation items.
    
    Keep the inside plain white—no gradient or pattern, its too wide and vertically it needs to not be this big 
{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-announcement-wrapper-{{ ai_gen_id }} {
    display: flex;
    justify-content: center;
    width: 100%;
    padding: 0 20px;
  }

  .ai-announcement-bar-{{ ai_gen_id }} {
    background-color: {{ block.settings.background_color }};
    border: {{ block.settings.border_width }}px solid {{ block.settings.border_color }};
    border-radius: {{ block.settings.border_radius }}px;
    padding: {{ block.settings.padding_vertical }}px {{ block.settings.padding_horizontal }}px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 16px;
    position: relative;
    overflow: visible;
    max-width: {{ block.settings.max_width }}px;
    width: 100%;
    height: {{ block.settings.bar_height }}px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }

  .ai-announcement-bar-{{ ai_gen_id }}::before,
  .ai-announcement-bar-{{ ai_gen_id }}::after {
    content: '';
    position: absolute;
    top: 0;
    bottom: 0;
    width: 30px;
    background: repeating-linear-gradient(
      45deg,
      {{ block.settings.border_color }},
      {{ block.settings.border_color }} 4px,
      transparent 4px,
      transparent 8px
    );
    z-index: 1;
  }

  .ai-announcement-bar-{{ ai_gen_id }}::before {
    left: -15px;
    border-radius: {{ block.settings.border_radius }}px 0 0 {{ block.settings.border_radius }}px;
  }

  .ai-announcement-bar-{{ ai_gen_id }}::after {
    right: -15px;
    border-radius: 0 {{ block.settings.border_radius }}px {{ block.settings.border_radius }}px 0;
  }

  .ai-announcement-bar-{{ ai_gen_id }} .ai-notch-left-{{ ai_gen_id }},
  .ai-announcement-bar-{{ ai_gen_id }} .ai-notch-right-{{ ai_gen_id }} {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 20px;
    height: 20px;
    background-color: {{ block.settings.page_background_color }};
    border-radius: 50%;
    z-index: 2;
  }

  .ai-announcement-bar-{{ ai_gen_id }} .ai-notch-left-{{ ai_gen_id }} {
    left: -10px;
  }

  .ai-announcement-bar-{{ ai_gen_id }} .ai-notch-right-{{ ai_gen_id }} {
    right: -10px;
  }

  .ai-announcement-icon-{{ ai_gen_id }} {
    display: flex;
    align-items: center;
    position: relative;
    flex-shrink: 0;
    z-index: 3;
  }

  .ai-announcement-gift-box-{{ ai_gen_id }} {
    width: {{ block.settings.icon_size }}px;
    height: {{ block.settings.icon_size }}px;
    background-color: {{ block.settings.gift_box_color }};
    border-radius: 4px;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .ai-announcement-gift-box-{{ ai_gen_id }}::before {
    content: '';
    position: absolute;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 6px;
    height: 100%;
    background-color: {{ block.settings.ribbon_color }};
  }

  .ai-announcement-gift-box-{{ ai_gen_id }}::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 0;
    transform: translateY(-50%);
    width: 100%;
    height: 6px;
    background-color: {{ block.settings.ribbon_color }};
  }

  .ai-announcement-sparkle-{{ ai_gen_id }} {
    position: absolute;
    width: 8px;
    height: 8px;
    background-color: {{ block.settings.sparkle_color }};
    clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
  }

  .ai-announcement-sparkle-{{ ai_gen_id }}:nth-child(1) {
    top: -8px;
    left: -8px;
  }

  .ai-announcement-sparkle-{{ ai_gen_id }}:nth-child(2) {
    top: -6px;
    right: -6px;
  }

  .ai-announcement-sparkle-{{ ai_gen_id }}:nth-child(3) {
    bottom: -8px;
    left: -6px;
  }

  .ai-announcement-sparkle-{{ ai_gen_id }}:nth-child(4) {
    bottom: -6px;
    right: -8px;
  }

  .ai-announcement-text-{{ ai_gen_id }} {
    flex-grow: 1;
    text-align: center;
    color: {{ block.settings.text_color }};
    font-size: {{ block.settings.text_size }}px;
    font-weight: {{ block.settings.text_weight }};
    font-family: {{ block.settings.text_font.family }}, {{ block.settings.text_font.fallback_families }};
    line-height: 1.2;
    margin: 0;
    z-index: 3;
    position: relative;
  }

  .ai-announcement-button-{{ ai_gen_id }} {
    background-color: {{ block.settings.button_color }};
    color: {{ block.settings.button_text_color }};
    border: none;
    border-radius: {{ block.settings.button_border_radius }}px;
    padding: {{ block.settings.button_padding_vertical }}px {{ block.settings.button_padding_horizontal }}px;
    font-size: {{ block.settings.button_text_size }}px;
    font-weight: {{ block.settings.button_text_weight }};
    text-decoration: none;
    cursor: pointer;
    transition: all 0.3s ease;
    flex-shrink: 0;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    white-space: nowrap;
    z-index: 3;
    position: relative;
  }

  .ai-announcement-button-{{ ai_gen_id }}:hover {
    background-color: {{ block.settings.button_hover_color }};
    color: {{ block.settings.button_hover_text_color }};
    transform: translateY(-1px);
  }

  @media screen and (max-width: 768px) {
    .ai-announcement-wrapper-{{ ai_gen_id }} {
      padding: 0 16px;
    }

    .ai-announcement-bar-{{ ai_gen_id }} {
      gap: 8px;
      padding: {{ block.settings.padding_vertical | times: 0.7 }}px {{ block.settings.padding_horizontal | times: 0.6 }}px;
      height: {{ block.settings.bar_height | times: 0.8 }}px;
    }

    .ai-announcement-text-{{ ai_gen_id }} {
      font-size: {{ block.settings.text_size | times: 0.8 }}px;
      text-align: left;
    }

    .ai-announcement-button-{{ ai_gen_id }} {
      font-size: {{ block.settings.button_text_size | times: 0.8 }}px;
      padding: {{ block.settings.button_padding_vertical | times: 0.6 }}px {{ block.settings.button_padding_horizontal | times: 0.6 }}px;
    }

    .ai-announcement-gift-box-{{ ai_gen_id }} {
      width: {{ block.settings.icon_size | times: 0.7 }}px;
      height: {{ block.settings.icon_size | times: 0.7 }}px;
    }

    .ai-announcement-gift-box-{{ ai_gen_id }}::before {
      width: 4px;
    }

    .ai-announcement-gift-box-{{ ai_gen_id }}::after {
      height: 4px;
    }

    .ai-announcement-sparkle-{{ ai_gen_id }} {
      width: 6px;
      height: 6px;
    }
  }

  @media screen and (max-width: 480px) {
    .ai-announcement-wrapper-{{ ai_gen_id }} {
      padding: 0 12px;
    }

    .ai-announcement-bar-{{ ai_gen_id }} {
      gap: 6px;
      padding: {{ block.settings.padding_vertical | times: 0.6 }}px {{ block.settings.padding_horizontal | times: 0.5 }}px;
      height: {{ block.settings.bar_height | times: 0.7 }}px;
    }

    .ai-announcement-text-{{ ai_gen_id }} {
      font-size: {{ block.settings.text_size | times: 0.7 }}px;
    }

    .ai-announcement-button-{{ ai_gen_id }} {
      font-size: {{ block.settings.button_text_size | times: 0.7 }}px;
      padding: {{ block.settings.button_padding_vertical | times: 0.5 }}px {{ block.settings.button_padding_horizontal | times: 0.5 }}px;
    }

    .ai-announcement-gift-box-{{ ai_gen_id }} {
      width: {{ block.settings.icon_size | times: 0.6 }}px;
      height: {{ block.settings.icon_size | times: 0.6 }}px;
    }

    .ai-announcement-sparkle-{{ ai_gen_id }} {
      width: 5px;
      height: 5px;
    }
  }
{% endstyle %}

<div class="ai-announcement-wrapper-{{ ai_gen_id }}" {{ block.shopify_attributes }}>
  <div class="ai-announcement-bar-{{ ai_gen_id }}">
    <div class="ai-notch-left-{{ ai_gen_id }}"></div>
    <div class="ai-notch-right-{{ ai_gen_id }}"></div>
    
    <div class="ai-announcement-icon-{{ ai_gen_id }}">
      <div class="ai-announcement-gift-box-{{ ai_gen_id }}">
        <div class="ai-announcement-sparkle-{{ ai_gen_id }}"></div>
        <div class="ai-announcement-sparkle-{{ ai_gen_id }}"></div>
        <div class="ai-announcement-sparkle-{{ ai_gen_id }}"></div>
        <div class="ai-announcement-sparkle-{{ ai_gen_id }}"></div>
      </div>
    </div>

    <div class="ai-announcement-text-{{ ai_gen_id }}">
      {{ block.settings.announcement_text }}
    </div>

    {% if block.settings.button_text != blank and block.settings.button_link != blank %}
      <a href="{{ block.settings.button_link }}" class="ai-announcement-button-{{ ai_gen_id }}">
        {{ block.settings.button_text }}
      </a>
    {% endif %}
  </div>
</div>

{% schema %}
{
  "name": "Festive announcement bar",
  "settings": [
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "announcement_text",
      "label": "Announcement text",
      "default": "Win Silver Coin on every Order Placed."
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button text",
      "default": "Order Now"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "Button link"
    },
    {
      "type": "header",
      "content": "Bar style"
    },
    {
      "type": "range",
      "id": "bar_height",
      "min": 50,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Bar height",
      "default": 70
    },
    {
      "type": "range",
      "id": "max_width",
      "min": 400,
      "max": 800,
      "step": 25,
      "unit": "px",
      "label": "Maximum width",
      "default": 600
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "border_color",
      "label": "Border color",
      "default": "#a4c86e"
    },
    {
      "type": "color",
      "id": "page_background_color",
      "label": "Page background color",
      "default": "#ffffff"
    },
    {
      "type": "range",
      "id": "border_width",
      "min": 2,
      "max": 6,
      "step": 1,
      "unit": "px",
      "label": "Border width",
      "default": 4
    },
    {
      "type": "range",
      "id": "border_radius",
      "min": 4,
      "max": 16,
      "step": 2,
      "unit": "px",
      "label": "Border radius",
      "default": 8
    },
    {
      "type": "range",
      "id": "padding_vertical",
      "min": 8,
      "max": 20,
      "step": 2,
      "unit": "px",
      "label": "Vertical padding",
      "default": 12
    },
    {
      "type": "range",
      "id": "padding_horizontal",
      "min": 16,
      "max": 32,
      "step": 2,
      "unit": "px",
      "label": "Horizontal padding",
      "default": 20
    },
    {
      "type": "header",
      "content": "Gift box icon"
    },
    {
      "type": "range",
      "id": "icon_size",
      "min": 20,
      "max": 36,
      "step": 2,
      "unit": "px",
      "label": "Icon size",
      "default": 28
    },
    {
      "type": "color",
      "id": "gift_box_color",
      "label": "Gift box color",
      "default": "#fa6e36"
    },
    {
      "type": "color",
      "id": "ribbon_color",
      "label": "Ribbon color",
      "default": "#e91e63"
    },
    {
      "type": "color",
      "id": "sparkle_color",
      "label": "Sparkle color",
      "default": "#ffd700"
    },
    {
      "type": "header",
      "content": "Text style"
    },
    {
      "type": "font_picker",
      "id": "text_font",
      "label": "Text font",
      "default": "open_sans_n4"
    },
    {
      "type": "range",
      "id": "text_size",
      "min": 12,
      "max": 18,
      "step": 1,
      "unit": "px",
      "label": "Text size",
      "default": 15
    },
    {
      "type": "select",
      "id": "text_weight",
      "label": "Text weight",
      "options": [
        {
          "value": "400",
          "label": "Normal"
        },
        {
          "value": "500",
          "label": "Medium"
        },
        {
          "value": "600",
          "label": "Semi-bold"
        },
        {
          "value": "700",
          "label": "Bold"
        }
      ],
      "default": "500"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text color",
      "default": "#a4c86e"
    },
    {
      "type": "header",
      "content": "Button style"
    },
    {
      "type": "color",
      "id": "button_color",
      "label": "Button color",
      "default": "#9c27b0"
    },
    {
      "type": "color",
      "id": "button_hover_color",
      "label": "Button hover color",
      "default": "#7b1fa2"
    },
    {
      "type": "color",
      "id": "button_text_color",
      "label": "Button text color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "button_hover_text_color",
      "label": "Button hover text color",
      "default": "#ffffff"
    },
    {
      "type": "range",
      "id": "button_border_radius",
      "min": 4,
      "max": 20,
      "step": 2,
      "unit": "px",
      "label": "Button border radius",
      "default": 8
    },
    {
      "type": "range",
      "id": "button_text_size",
      "min": 10,
      "max": 16,
      "step": 1,
      "unit": "px",
      "label": "Button text size",
      "default": 13
    },
    {
      "type": "select",
      "id": "button_text_weight",
      "label": "Button text weight",
      "options": [
        {
          "value": "400",
          "label": "Normal"
        },
        {
          "value": "500",
          "label": "Medium"
        },
        {
          "value": "600",
          "label": "Semi-bold"
        },
        {
          "value": "700",
          "label": "Bold"
        }
      ],
      "default": "600"
    },
    {
      "type": "range",
      "id": "button_padding_vertical",
      "min": 6,
      "max": 14,
      "step": 1,
      "unit": "px",
      "label": "Button vertical padding",
      "default": 10
    },
    {
      "type": "range",
      "id": "button_padding_horizontal",
      "min": 12,
      "max": 24,
      "step": 2,
      "unit": "px",
      "label": "Button horizontal padding",
      "default": 16
    }
  ],
  "presets": [
    {
      "name": "Festive announcement bar"
    }
  ]
}
{% endschema %}